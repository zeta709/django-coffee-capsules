{% extends "coffee_capsules/base.html" %}
{% load url from future %}

{% block content %}
	<table>
		<thead>
		<tr>
			<th>Capsule</th>
			<th>Price</th>
			<th>Qty. Accepted</th>
			<th>Qty. Grouped</th>
			<th>Qty. Queued</th>
		</tr>
		</thead>
		<tbody>{% if purchaseitem_list %}{% for purchaseitem in purchaseitem_list %}
		<tr>
			<td>{{ purchaseitem.capsule.name }}</td>
			<td>{{ purchaseitem.price }}</td>
			<td>{{ purchaseitem.quantity_accepted }}</td>
			<td>{{ purchaseitem.quantity_grouped }}</td>
			<td>{{ purchaseitem.quantity_queued }}</td>
		</tr>{% endfor %}{% else %}
		<tr>
			<td colspan="5">(Empty)</td>
		</tr>{% endif %}
		</tbody>
	</table>
	<br /><br />{% if request_list %}
	<table>
		<caption>
			Summary{%if agq %}<br />(A: accepted, G: grouped, Q: queued){% endif %}
		</caption>
		{# BEGIN thead #}{% if capsule_list %}
		<thead>
		<tr>
			<th{% if agq %} rowspan="2"{% endif %}>User</th>{% for capsule in capsule_list %}
			<th{% if agq %} colspan="3"{% endif %}>{{ capsule.1 }}</th>{% endfor %}
			<th{% if agq %} colspan="3"{% endif %}>Sum</th>
			<th{% if agq %} colspan="3"{% endif %}>Price</th>
		</tr>{% endif %}{% if agq %}
		<tr>{% for capsule in capsule_list %}
			<th>A</th>
			<th>G</th>
			<th>Q</th>{% endfor %}
			<th>A</th>
			<th>G</th>
			<th>Q</th>
			<th>A</th>
			<th>G</th>
			<th>Q</th>
		</tr>
		</thead>{% endif %}{# END thead #}
		{# BEGIN tfoot #}{% if total_row %}
		<tfoot>
		<tr>{% for i in total_row %}
			<td>{{ i }}</td>{% endfor %}
		</tr>
		</tfoot>{% endif %}{# END tfoot #}
		{# BEGIN body #}{% if request_list %}
		<tbody>	{% for request in request_list %}
		<tr>{% for i in request %}
			<td>{{ i }}</td>{% endfor %}
		</tr>{% endfor %}
		</tbody>{% endif %}{# END tbody #}
	</table>{% endif %}
{% endblock %}
